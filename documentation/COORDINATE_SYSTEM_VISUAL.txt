================================================================================
SOCCER FIELD COORDINATE SYSTEM - VISUAL DIAGRAM
================================================================================

PITCH COORDINATES (Internal Units: 12000 x 7000)
=================================================

                    Y = 0 (TOP SIDELINE)
        ┌─────────────────────────────────────────────┐
        │                                             │
    X=0 │              LEFT GOAL                      │ X=12000
   (L)  │                                             │ (R)
        │         [6000, 0]                           │
        │        ┌──────┐                             │
        │        │      │     CENTER CIRCLE           │
        │    [0,1570] ──┤      ●─────────●            │
        │        │      │   [6000,3500]               │
        │        │      │                             │
        │    [0,5430] ──┤      (CENTER)               │
        │        │      │                             │
        │        └──────┘                             │
        │    PENALTY AREA                RIGHT GOAL   │
        │                                             │
        └─────────────────────────────────────────────┘
                   Y = 7000 (BOTTOM SIDELINE)


REAL-WORLD COORDINATES (Meters: 105m x 68m)
============================================

                    Y = 0m (TOP SIDELINE)
        ┌─────────────────────────────────────────────┐
        │                                             │
  X=0m  │              LEFT GOAL                      │ X=105m
  (L)   │                                             │ (R)
        │         [52.5m, 0m]                         │
        │        ┌──────┐                             │
        │        │      │     CENTER CIRCLE           │
        │   [0,17.3m]──┤      ●─────────●            │
        │        │      │   [52.5m, 34m]              │
        │        │      │                             │
        │   [0,50.7m]──┤      (CENTER)               │
        │        │      │                             │
        │        └──────┘                             │
        │    PENALTY AREA                RIGHT GOAL   │
        │                                             │
        └─────────────────────────────────────────────┘
                   Y = 68m (BOTTOM SIDELINE)


COORDINATE ORIENTATION
======================

CORRECT (Current System):
  - Origin (0,0) at TOP-LEFT corner
  - X-axis: Horizontal, increases LEFT → RIGHT
  - Y-axis: Vertical, increases TOP → BOTTOM

   (0,0) ────X+────→ (105,0)
     │                   │
     │                   │
    Y+                  Y+
     │                   │
     ↓                   ↓
   (0,68) ──X+──→ (105,68)


EXAMPLE PLAYER POSITIONS
=========================

Position         Coordinates     Location Description
--------         -----------     --------------------
Goalkeeper       (5, 34)         Near left goal, center
Left Defender    (20, 15)        Left third, top side
Center Back      (18, 34)        Left third, center
Right Defender   (20, 53)        Left third, bottom side
Left Midfielder  (40, 15)        Middle third, top side
Central Mid      (52.5, 34)      Exact center of field
Right Midfielder (40, 53)        Middle third, bottom side
Left Winger      (75, 10)        Right third, near top
Striker          (90, 34)        Right third, center
Right Winger     (75, 58)        Right third, near bottom


INVALID COORDINATE EXAMPLES
============================

Example 1: Player at (52.5, -104.66) meters
  ┌─────────────────────────────────────────────┐
  │                                             │
  │     Y = -104.66m ← PLAYER IS HERE!          │ ⚠️ IMPOSSIBLE!
  │     (104.66 meters ABOVE top sideline)      │
  │                                             │
  ├─────────────────────────────────────────────┤ ← Y = 0 (TOP)
  │                                             │
  │              ACTUAL FIELD                   │
  │                                             │
  │                                             │
  │                                             │
  │                                             │
  └─────────────────────────────────────────────┘ ← Y = 68 (BOTTOM)

Result: Homography transformation is COMPLETELY WRONG


Example 2: Player at (83.45, 80.87) meters
  ┌─────────────────────────────────────────────┐ ← Y = 0 (TOP)
  │                                             │
  │              ACTUAL FIELD                   │
  │                                             │
  │                                             │
  │                                             │
  │                                             │
  └─────────────────────────────────────────────┘ ← Y = 68 (BOTTOM)
  │                                             │
  │     Y = 80.87m ← PLAYER IS HERE!            │ ⚠️ WRONG!
  │     (12.87 meters BELOW bottom sideline)    │
  │                                             │

Result: Homography transformation has significant error


Example 3: Player at (-15, 34) meters
           X = -15m ← PLAYER
           (15m behind left goal)
  │
  │
  ├─────────────────────────────────────────────┤
  │ X=0                                    X=105│
  │              ACTUAL FIELD                   │
  │                                             │
  │                                             │
  │                                             │
  │                                             │
  └─────────────────────────────────────────────┘

Result: Player outside field boundary (left side)


VALID RANGES
============

STRICTLY VALID (On field):
  X: 0.0 to 105.0 meters
  Y: 0.0 to 68.0 meters

ACCEPTABLE (Edge tolerance for perspective distortion):
  X: -5.0 to 110.0 meters  (±5m tolerance)
  Y: -5.0 to 73.0 meters   (±5m tolerance)

CATASTROPHIC (Homography failure):
  X: < -10.0 or > 115.0 meters
  Y: < -10.0 or > 78.0 meters


COORDINATE QUADRANTS
====================

         Y = 0
    ┌─────┬─────┐
    │  Q1 │ Q2  │  Q1: Left-Top    (X: 0-52.5, Y: 0-34)
    │     │     │  Q2: Right-Top   (X: 52.5-105, Y: 0-34)
X=0 ├─────┼─────┤ X=105
    │  Q3 │ Q4  │  Q3: Left-Bottom (X: 0-52.5, Y: 34-68)
    │     │     │  Q4: Right-Bottom(X: 52.5-105, Y: 34-68)
    └─────┴─────┘
         Y = 68


FIELD THIRDS (Tactical Zones)
==============================

    Left Third    Middle Third   Right Third
    (X: 0-35)     (X: 35-70)     (X: 70-105)
  ┌─────────────┬─────────────┬─────────────┐
  │             │             │             │
  │  DEFENSIVE  │   MIDDLE    │ ATTACKING   │
  │    ZONE     │    ZONE     │    ZONE     │
  │             │             │             │
  │   (Team A)  │  (Neutral)  │  (Team B)   │
  │             │             │             │
  └─────────────┴─────────────┴─────────────┘
     0          35           70           105


CONVERSION EXAMPLES
===================

Pitch Units → Meters:
  [0, 0]         → (0.00, 0.00)    [Top-left corner]
  [12000, 0]     → (105.0, 0.00)   [Top-right corner]
  [0, 7000]      → (0.00, 68.0)    [Bottom-left corner]
  [12000, 7000]  → (105.0, 68.0)   [Bottom-right corner]
  [6000, 3500]   → (52.5, 34.0)    [Center]
  [1980, 3500]   → (17.33, 34.0)   [Left penalty arc]
  [10020, 3500]  → (87.67, 34.0)   [Right penalty arc]

Scaling Factors:
  X: 12000 units = 105m  →  1 unit = 0.00875m
  Y: 7000 units = 68m    →  1 unit = 0.00971428m


PERSPECTIVE TRANSFORMATION EXAMPLE
===================================

Camera View (Pixels) → Homography → Pitch Units → Scale → Meters

Step 1: Detect keypoints in camera frame
  Top-left corner detected at pixel: (120, 85)
  Center detected at pixel:          (960, 540)
  Top-right corner detected at:      (1800, 90)

Step 2: Create homography matrix mapping pixels to pitch units
  Pixel (120, 85)  → Pitch [0, 0]
  Pixel (960, 540) → Pitch [6000, 3500]
  Pixel (1800, 90) → Pitch [12000, 0]

Step 3: Transform player foot position
  Player pixel:    (854, 623)
  Homography:      (854, 623) → Pitch [4200, 4500]
  Scale to meters: [4200, 4500] → (36.75m, 43.71m)

Result: Player at (36.75, 43.71) meters ✓ VALID
  - 36.75m from left goal (35% across)
  - 43.71m from top (64% down)
  - Left-middle of field


WHEN TRANSFORMATION FAILS
==========================

Bad Keypoint Detection:
  Detected top-left at pixel (856, 234) ← WRONG!
  Maps to pitch [0, 0]

  Player at pixel (854, 623)
  Homography: (854, 623) → Pitch [-200, 35000] ← NONSENSE!
  Scale: [-200, 35000] → (-1.75m, 340m)

Result: Player at (-1.75, 340m) ❌ CATASTROPHICALLY WRONG
  Y = 340m means player is 272 meters below the field!


SUMMARY
=======

✓ Coordinate system is CORRECT:
  - Origin at top-left
  - X: left to right (0-105m)
  - Y: top to bottom (0-68m)

✗ Problem is HOMOGRAPHY TRANSFORMATION:
  - Bad keypoint detection
  - Insufficient keypoints
  - Degenerate transformation matrix
  - Produces impossible coordinates

✓ Solution:
  - Improve keypoint detection
  - Tighten validation thresholds
  - Better fallback methods
  - Distance-based validation

================================================================================
